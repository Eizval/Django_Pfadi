{% extends "base.html" %}
{% block title %}Rollenverwaltung{% endblock %}
{% block content %}
<div class="role-container">
  <h1>Rollen√ºbersicht</h1>

  <table class="role-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Rolle</th>
        <th>Aktion</th>
      </tr>
    </thead>
    <tbody>
      {% for role in objects %}
      <tr>
        <td>{{ role.id }}</td>
        <td>{{ role.name }}</td>
        <td>
          <a href="#"
             class="delete-link"
             data-url="{% url 'delete_role' role.id %}">
             üóë
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="3" class="no-data">Keine Rollen gefunden.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'create_role' %}" class="add-btn">+ Rolle hinzuf√ºgen</a>
</div>

<!-- Popup -->
<div id="confirm-modal" class="modal">
  <div class="modal-content">
    <p>Willst du diese Rolle wirklich l√∂schen?</p>
    <div class="buttons">
      <button id="confirm-yes">Ja</button>
      <button id="confirm-no">Abbrechen</button>
    </div>
  </div>
</div>

<script>
function openAddRoleModal(userId) {
  const modal = document.getElementById('addRoleModal');
  const form = modal.querySelector('form');
  form.action = `/add_role/${userId}/`;
  modal.style.display = 'flex';
}

function closeAddRoleModal() {
  document.getElementById('addRoleModal').style.display = 'none';
}

// Optional: Schlie√üen bei Klick au√üerhalb
window.onclick = function(event) {
  const modal = document.getElementById('addRoleModal');
  if (event.target === modal) {
    modal.style.display = 'none';
  }
}
</script>

{% endblock %}
