{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Pfadi Projekt{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    {% block extra_css %}{% endblock %}
</head>
<body>
{% block header %}{% endblock %}
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="message {{ message.tags }}">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}
<main>
    {% block content %}{% endblock %}
</main>
</body>
</html>

<script>
    // Nach 3 Sekunden alle Toasts aus dem DOM entfernen
    setTimeout(() => {
        document.querySelectorAll('.message').forEach(msg => msg.remove());
    }, 5000);

    const modal = document.getElementById('confirm-modal');
    const yesBtn = document.getElementById('confirm-yes');
    const noBtn = document.getElementById('confirm-no');
    let deleteUrl = '';

    // Klick auf Löschen-Link
    document.querySelectorAll('.delete-link').forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            deleteUrl = link.dataset.url;
            modal.style.display = 'flex';
        });
    });

    // Bestätigen → Weiterleitung
    yesBtn.addEventListener('click', () => {
        window.location.href = deleteUrl;
    });

    // Abbrechen → Popup schließen
    noBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    // Klick außerhalb → Popup schließen
    window.addEventListener('click', e => {
        if (e.target === modal) modal.style.display = 'none';
    });
</script>